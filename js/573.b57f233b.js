"use strict";(self["webpackChunkgoilauncher"]=self["webpackChunkgoilauncher"]||[]).push([[573],{7573:function(e,t,l){l.r(t),l.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"about"},[t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.showDialog}},[t("div",[e._v(" 在审核通过后，您的速通将会出现在排行榜中。 "),t("br"),e._v(" 您可以在待审核页面查看您的速通是否处于审核中。 ")]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showDialog=!1}}},[e._v("确定")])],1)]),t("el-form",{ref:"speedrun",attrs:{"hide-required-asterisk":!0,model:e.speedrun,rules:e.rules,"label-position":"top"}},[t("el-form-item",{attrs:{label:"模式"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.speedrun.Category,callback:function(t){e.$set(e.speedrun,"Category",t)},expression:"speedrun.Category"}},e._l(e.categories,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"游戏平台"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.speedrun.Platform,callback:function(t){e.$set(e.speedrun,"Platform",t)},expression:"speedrun.Platform"}},e._l(e.platforms,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"国家"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.speedrun.CountryCode,callback:function(t){e.$set(e.speedrun,"CountryCode",t)},expression:"speedrun.CountryCode"}},e._l(e.countryCodes,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"视频平台"}},[t("el-select",{staticStyle:{width:"100%"},on:{change:e.changeVideoPlatform},model:{value:e.speedrun.VideoPlatform,callback:function(t){e.$set(e.speedrun,"VideoPlatform",t)},expression:"speedrun.VideoPlatform"}},e._l(e.videoPlatforms,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:e.videoIDName,prop:"VID",rules:[{required:!0,message:`${this.videoIDName}不能为空`,trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:`请输入${e.videoIDName}`},model:{value:e.speedrun.VID,callback:function(t){e.$set(e.speedrun,"VID",t)},expression:"speedrun.VID"}})],1),t("el-form-item",{attrs:{label:"玩家（可选）"}},[t("el-input",{attrs:{placeholder:"请输入玩家名字（仅供审核查看，通过后会改成视频平台用户名）"},model:{value:e.speedrun.Player,callback:function(t){e.$set(e.speedrun,"Player",t)},expression:"speedrun.Player"}})],1),t("el-form-item",{attrs:{label:"时间",prop:"Time"}},[t("div",{staticClass:"flex"},[t("el-input",{staticClass:"stretch",on:{input:e.limitMin},model:{value:e.speedrun.Minute,callback:function(t){e.$set(e.speedrun,"Minute",e._n(t))},expression:"speedrun.Minute"}}),t("a",{staticClass:"minWidth"},[e._v("分")]),t("el-input",{staticClass:"stretch",on:{input:e.limitSecond},model:{value:e.speedrun.Second,callback:function(t){e.$set(e.speedrun,"Second",e._n(t))},expression:"speedrun.Second"}}),t("a",{staticClass:"minWidth"},[e._v(".")]),t("el-input",{staticClass:"stretch",on:{input:e.limitMillionSecond},model:{value:e.speedrun.MillionSecond,callback:function(t){e.$set(e.speedrun,"MillionSecond",e._n(t))},expression:"speedrun.MillionSecond"}}),t("a",{staticClass:"minWidth"},[e._v("秒")])],1)]),t("el-form-item",[t("div",{staticClass:"flex"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitRun("speedrun")}}},[e._v("提交")])],1)])],1)],1)},i=[],n={data(){return{showDialog:!1,dialogTitle:"提交成功！",speedrun:{Category:"Glitchless",Platform:"PC",VideoPlatform:"哔哩哔哩",VID:"",Player:"",CountryCode:"cn",Minute:"",Second:"",MillionSecond:"",TotalTime:0},rules:{Time:{validator:this.checkTime,message:"时间不能为空",trigger:"blur",type:Boolean}},videoIDName:"哔哩哔哩视频链接（或BV号）",categories:[{value:"Glitchless",label:"Glitchless"},{value:"Snake",label:"Snake"}],platforms:[{value:"PC",label:"PC"},{value:"Android",label:"安卓"},{value:"IOS",label:"IOS"}],videoPlatforms:[{value:"哔哩哔哩",label:"哔哩哔哩"},{value:"YouTube",label:"YouTube"}],countryCodes:[{value:"cn",label:"中国"}]}},mounted(){},methods:{async createRun(e){const t=new Headers({"X-LC-Id":"3Dec7Zyj4zLNDU0XukGcAYEk-gzGzoHsz","X-LC-Key":"uHF3AdKD4i3RqZB7w1APiFRF","Content-Type":"application/json"}),l={method:"POST",headers:t,body:JSON.stringify(e)},s="https://3dec7zyj.lc-cn-n1-shared.com/1.1/classes/PendingRun",i=await fetch(s,l),n=await i.json();console.log(n)},submitRun(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;{let e=!1;switch(this.speedrun.VideoPlatform){case"哔哩哔哩":this.speedrun.VID.split("/").forEach((t=>{t.startsWith("BV")&&(e=!0,this.speedrun.VID=t)}));break;case"YouTube":this.speedrun.VID.includes("watch?v=")&&this.speedrun.VID.split("/").forEach((t=>{t.startsWith("watch?v=")&&(e=!0,this.speedrun.VID=t.substring(8,t.length))}));break}if(!e)return void alert(`输入的${this.videoIDName}有误，请重新检查。`);this.speedrun.TotalTime=60*this.speedrun.Minute+this.speedrun.Second+this.speedrun.MillionSecond/1e3,this.speedrun.Time=`${this.speedrun.Minute>0?`${this.speedrun.Minute}分`:""}${this.speedrun.Second.toString().padStart(2,"0")}.${this.speedrun.MillionSecond.toString().padStart(3,"0")}秒`,this.createRun(this.speedrun),this.showDialog=!0,this.dialogTitle="提交成功！"}}))},limitMin(e){this.speedrun.Minute=Number(e.replace(/[^\d]/g,"")),e>99?this.speedrun.Minute=99:e<0&&(this.speedrun.Minute=0)},limitSecond(e){this.speedrun.Second=Number(e.replace(/[^\d]/g,"")),e>59?this.speedrun.Second=59:e<0&&(this.speedrun.Second=0)},limitMillionSecond(e){this.speedrun.MillionSecond=Number(e.replace(/[^\d]/g,"")),e>999?this.speedrun.MillionSecond=999:e<0&&(this.speedrun.MillionSecond=0)},changeVideoPlatform(){switch(console.log(this.speedrun.VideoPlatform),this.speedrun.VideoPlatform){case"哔哩哔哩":this.videoIDName="哔哩哔哩视频链接（或BV号）";break;case"YouTube":this.videoIDName="YouTube视频链接";break}},checkTime(e,t,l){if(this.speedrun.Minute.length<=0||this.speedrun.Second.length<=0||this.speedrun.MillionSecond.length<=0)return l(new Error("时间不能为空"));l()}}},r=n,a=l(1656),o=(0,a.A)(r,s,i,!1,null,"7f87840f",null),u=o.exports}}]);
//# sourceMappingURL=573.b57f233b.js.map