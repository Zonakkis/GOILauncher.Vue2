{"ast":null,"code":"export default {\n  data() {\n    return {\n      speedrun: {\n        Category: \"Glitchless\",\n        Platform: \"PC\",\n        VideoPlatform: \"哔哩哔哩\",\n        VID: \"\",\n        Player: \"\",\n        Minute: \"\",\n        Second: NaN,\n        MillionSecond: NaN\n      },\n      videoIDName: \"BV号\",\n      categories: [{\n        value: \"Glitchless\",\n        label: \"Glitchless\"\n      }, {\n        value: \"Snake\",\n        label: \"Snake\"\n      }],\n      platforms: [{\n        value: \"PC\",\n        label: \"PC\"\n      }, {\n        value: \"Android\",\n        label: \"安卓\"\n      }, {\n        value: \"IOS\",\n        label: \"IOS\"\n      }],\n      videoPlatforms: [{\n        value: \"哔哩哔哩\",\n        label: \"哔哩哔哩\"\n      }],\n      target: \"\",\n      targets: {\n        UID: \"UID\",\n        BVID: \"UID\"\n      }\n    };\n  },\n  mounted() {\n    document.getElementById(\"bilibili\").addEventListener(\"load\", () => {\n      console.log(document.getElementById(\"bilibili\").contentDocument.querySelector('[style=\"word-wrap: break-word; white-space: pre-wrap;\"]').value);\n    });\n  },\n  methods: {\n    handleResponse(data) {\n      console.log(data);\n    },\n    getvideoIDName() {\n      switch (this.speedrun.VideoPlatform) {\n        case \"哔哩哔哩\":\n          this.videoIDName = \"BV号\";\n          break;\n      }\n    },\n    async getBilibilimidFromBVID() {\n      document.getElementById(\"bilibili\").src = `https://api.bilibili.com/x/web-interface/view?bvid=${this.speedrun.VID}`;\n\n      // const url = `https://api.bilibili.com/x/web-interface/wbi/view?bvid${this.speedrun.VID}`;\n      // const headers = {\n      //   \"Content-Type\": \"application/json\",\n      // };\n      // const option = {\n      //   method: \"GET\",\n      //   headers: headers,\n      //   referrer: \"https://www.bilibili.com\",\n      // };\n      // const result = await fetch(url, option);\n      // console.log(result);\n      //this.speedrun.Player = result.data.owner.mid;\n    },\n    async getPlayer() {\n      const url = \"https://api.live.bilibili.com/live_user/v1/Master/info\";\n      const option = {\n        method: \"GET\"\n      };\n      const result = await fetch(url, option);\n      console.log(result);\n    }\n  }\n};\n\n/*\r\nSESSDATA = e06ecc4f%2C1744732834%2C28938%2Aa1CjAUTVOCYUkRLYJqES-xqdv6Hj9GHtLnUJQyjfqksHzNWGdSVUqjjslX7kfGLTv9U3MSVm55ekxmaEZaakFFdHctYnJSdkxRUFNIeDh6YzNWUWJMX2pkRE9sdWwxZUgzTW8yUGhsOWFfYWNFeUhMSWkwVUVuNV80Q0Y1NkxSNWtST0JXN3dGU2dnIIEC\r\n*/","map":{"version":3,"names":["data","speedrun","Category","Platform","VideoPlatform","VID","Player","Minute","Second","NaN","MillionSecond","videoIDName","categories","value","label","platforms","videoPlatforms","target","targets","UID","BVID","mounted","document","getElementById","addEventListener","console","log","contentDocument","querySelector","methods","handleResponse","getvideoIDName","getBilibilimidFromBVID","src","getPlayer","url","option","method","result","fetch"],"sources":["src/views/SubmitRunView.vue"],"sourcesContent":["<template>\r\n  <div class=\"about\">\r\n    <el-form :model=\"speedrun\" label-position=\"left\" label-width=\"80px\">\r\n      <el-form-item label=\"模式\">\r\n        <el-select v-model=\"speedrun.Category\">\r\n          <el-option\r\n            v-for=\"category in categories\"\r\n            :key=\"category.value\"\r\n            :label=\"category.label\"\r\n            :value=\"category.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"游戏平台\">\r\n        <el-select v-model=\"speedrun.Platform\">\r\n          <el-option\r\n            v-for=\"platform in platforms\"\r\n            :key=\"platform.value\"\r\n            :label=\"platform.label\"\r\n            :value=\"platform.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"视频平台\">\r\n        <el-select v-model=\"speedrun.VideoPlatform\">\r\n          <el-option\r\n            v-for=\"videoPlatform in videoPlatforms\"\r\n            :key=\"videoPlatform.value\"\r\n            :label=\"videoPlatform.label\"\r\n            :value=\"videoPlatform.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item\r\n        :label=\"videoIDName\"\r\n        :rules=\"[{ required: true, message: '分不能为空', trigger: 'blur' }]\"\r\n      >\r\n        <el-input\r\n          v-model=\"speedrun.VID\"\r\n          @change=\"getBilibilimidFromBVID\"\r\n          :placeholder=\"`请输入${videoIDName}`\"\r\n          style=\"width: auto\"\r\n        >\r\n        </el-input\r\n      ></el-form-item>\r\n      <el-form-item label=\"玩家\">\r\n        <el-input\r\n          v-model=\"speedrun.Player\"\r\n          :placeholder=\"`输入${videoIDName}后自动获取`\"\r\n          :disabled=\"true\"\r\n          style=\"width: auto\"\r\n        >\r\n        </el-input\r\n      ></el-form-item>\r\n      <el-form-item\r\n        label=\"时间\"\r\n        :rules=\"[{ required: true, message: '分不能为空' }]\"\r\n      >\r\n        <el-input\r\n          v-model.number=\"speedrun.Minute\"\r\n          Min=\"0\"\r\n          type=\"Number\"\r\n          style=\"width: auto\"\r\n        >\r\n        </el-input>\r\n        分\r\n        <el-input\r\n          v-model=\"speedrun.Second\"\r\n          Max=\"59\"\r\n          Min=\"0\"\r\n          type=\"Number\"\r\n          style=\"width: auto\"\r\n        >\r\n        </el-input>\r\n        .\r\n        <el-input\r\n          v-model=\"speedrun.MillionSecond\"\r\n          Max=\"999\"\r\n          Min=\"0\"\r\n          type=\"Number\"\r\n          style=\"width: auto\"\r\n        >\r\n        </el-input>\r\n        秒\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\">提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <iframe id=\"bilibili\" src=\"about:blank\"></iframe>\r\n  </div>\r\n</template>\r\n  \r\n  <script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      speedrun: {\r\n        Category: \"Glitchless\",\r\n        Platform: \"PC\",\r\n        VideoPlatform: \"哔哩哔哩\",\r\n        VID: \"\",\r\n        Player: \"\",\r\n        Minute: \"\",\r\n        Second: NaN,\r\n        MillionSecond: NaN,\r\n      },\r\n      videoIDName: \"BV号\",\r\n      categories: [\r\n        {\r\n          value: \"Glitchless\",\r\n          label: \"Glitchless\",\r\n        },\r\n        {\r\n          value: \"Snake\",\r\n          label: \"Snake\",\r\n        },\r\n      ],\r\n      platforms: [\r\n        {\r\n          value: \"PC\",\r\n          label: \"PC\",\r\n        },\r\n        {\r\n          value: \"Android\",\r\n          label: \"安卓\",\r\n        },\r\n        {\r\n          value: \"IOS\",\r\n          label: \"IOS\",\r\n        },\r\n      ],\r\n      videoPlatforms: [\r\n        {\r\n          value: \"哔哩哔哩\",\r\n          label: \"哔哩哔哩\",\r\n        },\r\n      ],\r\n      target: \"\",\r\n      targets: {\r\n        UID: \"UID\",\r\n        BVID: \"UID\",\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    document.getElementById(\"bilibili\").addEventListener(\"load\", () => {\r\n      console.log(\r\n        document.getElementById(\"bilibili\").contentDocument.querySelector('[style=\"word-wrap: break-word; white-space: pre-wrap;\"]').value\r\n      );\r\n    });\r\n  },\r\n  methods: {\r\n    handleResponse(data) {\r\n      console.log(data);\r\n    },\r\n    getvideoIDName() {\r\n      switch (this.speedrun.VideoPlatform) {\r\n        case \"哔哩哔哩\":\r\n          this.videoIDName = \"BV号\";\r\n          break;\r\n      }\r\n    },\r\n    async getBilibilimidFromBVID() {\r\n      document.getElementById(\"bilibili\").src=`https://api.bilibili.com/x/web-interface/view?bvid=${this.speedrun.VID}`;\r\n\r\n      // const url = `https://api.bilibili.com/x/web-interface/wbi/view?bvid${this.speedrun.VID}`;\r\n      // const headers = {\r\n      //   \"Content-Type\": \"application/json\",\r\n      // };\r\n      // const option = {\r\n      //   method: \"GET\",\r\n      //   headers: headers,\r\n      //   referrer: \"https://www.bilibili.com\",\r\n      // };\r\n      // const result = await fetch(url, option);\r\n      // console.log(result);\r\n      //this.speedrun.Player = result.data.owner.mid;\r\n    },\r\n    async getPlayer() {\r\n      const url = \"https://api.live.bilibili.com/live_user/v1/Master/info\";\r\n      const option = {\r\n        method: \"GET\",\r\n      };\r\n      const result = await fetch(url, option);\r\n      console.log(result);\r\n    },\r\n  },\r\n};\r\n\r\n/*\r\nSESSDATA = e06ecc4f%2C1744732834%2C28938%2Aa1CjAUTVOCYUkRLYJqES-xqdv6Hj9GHtLnUJQyjfqksHzNWGdSVUqjjslX7kfGLTv9U3MSVm55ekxmaEZaakFFdHctYnJSdkxRUFNIeDh6YzNWUWJMX2pkRE9sdWwxZUgzTW8yUGhsOWFfYWNFeUhMSWkwVUVuNV80Q0Y1NkxSNWtST0JXN3dGU2dnIIEC\r\n*/\r\n</script>\r\n  "],"mappings":"AAiGA;EACAA,KAAA;IACA;MACAC,QAAA;QACAC,QAAA;QACAC,QAAA;QACAC,aAAA;QACAC,GAAA;QACAC,MAAA;QACAC,MAAA;QACAC,MAAA,EAAAC,GAAA;QACAC,aAAA,EAAAD;MACA;MACAE,WAAA;MACAC,UAAA,GACA;QACAC,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,EACA;MACAC,SAAA,GACA;QACAF,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,EACA;MACAE,cAAA,GACA;QACAH,KAAA;QACAC,KAAA;MACA,EACA;MACAG,MAAA;MACAC,OAAA;QACAC,GAAA;QACAC,IAAA;MACA;IACA;EACA;EACAC,QAAA;IACAC,QAAA,CAAAC,cAAA,aAAAC,gBAAA;MACAC,OAAA,CAAAC,GAAA,CACAJ,QAAA,CAAAC,cAAA,aAAAI,eAAA,CAAAC,aAAA,4DAAAf,KACA;IACA;EACA;EACAgB,OAAA;IACAC,eAAA9B,IAAA;MACAyB,OAAA,CAAAC,GAAA,CAAA1B,IAAA;IACA;IACA+B,eAAA;MACA,aAAA9B,QAAA,CAAAG,aAAA;QACA;UACA,KAAAO,WAAA;UACA;MACA;IACA;IACA,MAAAqB,uBAAA;MACAV,QAAA,CAAAC,cAAA,aAAAU,GAAA,8DAAAhC,QAAA,CAAAI,GAAA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA,MAAA6B,UAAA;MACA,MAAAC,GAAA;MACA,MAAAC,MAAA;QACAC,MAAA;MACA;MACA,MAAAC,MAAA,SAAAC,KAAA,CAAAJ,GAAA,EAAAC,MAAA;MACAX,OAAA,CAAAC,GAAA,CAAAY,MAAA;IACA;EACA;AACA;;AAEA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}