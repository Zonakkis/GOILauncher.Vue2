{"ast":null,"code":"export default {\n  data() {\n    return {\n      speedruns: {},\n      pageCount: 1\n    };\n  },\n  created() {\n    window.addEventListener(\"resize\", this.freshTable);\n  },\n  async mounted() {\n    this.getSpeedruns();\n  },\n  methods: {\n    async getSpeedruns() {\n      const url = \"https://3dec7zyj.lc-cn-n1-shared.com/1.1/classes/Speedrun?order=TotalTime\";\n      const headers = new Headers({\n        \"X-LC-Id\": \"3Dec7Zyj4zLNDU0XukGcAYEk-gzGzoHsz\",\n        \"X-LC-Key\": \"uHF3AdKD4i3RqZB7w1APiFRF\",\n        \"Content-Type\": \"application/json\"\n      });\n      const options = {\n        method: \"GET\",\n        headers: headers\n      };\n      const response = await fetch(url, options);\n      //console.log(await response.json());\n      this.speedruns = (await response.json()).results;\n      this.speedruns.forEach(speedrun => {\n        switch (speedrun.VideoPlatform) {\n          case \"哔哩哔哩\":\n            speedrun.VideoURL = \"https://www.bilibili.com/video/\" + speedrun.VID;\n            speedrun.PlayerURL = \"https://space.bilibili.com/\" + speedrun.UID;\n            break;\n          default:\n            break;\n        }\n      });\n      this.speedruns = [...this.speedruns, ...this.speedruns];\n    },\n    freshTable() {\n      this.$nextTick(() => {\n        this.$refs.table.doLayout();\n      });\n    }\n  }\n};","map":{"version":3,"names":["data","speedruns","pageCount","created","window","addEventListener","freshTable","mounted","getSpeedruns","methods","url","headers","Headers","options","method","response","fetch","json","results","forEach","speedrun","VideoPlatform","VideoURL","VID","PlayerURL","UID","$nextTick","$refs","table","doLayout"],"sources":["src/views/LeaderboardView.vue"],"sourcesContent":["<template>\r\n  <div class=\"leaderboard\" ref=\"table\">\r\n    <el-table v-bind:data=\"speedruns\" style=\"width: 100%\" >\r\n      <el-table-column label=\"排名\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"玩家\">\r\n        <template slot-scope=\"scope\">\r\n          <a v-bind:href=\"scope.row.PlayerURL\" target=\"_blank\">{{\r\n            scope.row.Player\r\n          }}</a>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"Platform\" label=\"平台\"> </el-table-column>\r\n      <el-table-column prop=\"Time\" label=\"时间\"> </el-table-column>\r\n      <el-table-column label=\"视频地址\">\r\n        <template slot-scope=\"scope\">\r\n          <a v-bind:href=\"scope.row.VideoURL\" target=\"_blank\">{{\r\n            scope.row.VideoPlatform\r\n          }}</a>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination background layout=\"prev, pager, next\" :total=\"pageCount\">\r\n    </el-pagination>\r\n    <!-- <p>{{ speedruns }}</p> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      speedruns: {},\r\n      pageCount : 1,\r\n    };\r\n  },\r\n  created(){\r\n    window.addEventListener(\"resize\",this.freshTable);\r\n  },\r\n  async mounted() {\r\n    this.getSpeedruns();\r\n  },\r\n  methods: {\r\n    async getSpeedruns() {\r\n      const url = \"https://3dec7zyj.lc-cn-n1-shared.com/1.1/classes/Speedrun?order=TotalTime\";\r\n      const headers = new Headers({\r\n        \"X-LC-Id\": \"3Dec7Zyj4zLNDU0XukGcAYEk-gzGzoHsz\",\r\n        \"X-LC-Key\": \"uHF3AdKD4i3RqZB7w1APiFRF\",\r\n        \"Content-Type\": \"application/json\",\r\n      });\r\n      const options = {\r\n        method: \"GET\",\r\n        headers: headers,\r\n      };\r\n      const response = await fetch(url, options);\r\n      //console.log(await response.json());\r\n      this.speedruns = (await response.json()).results;\r\n      this.speedruns.forEach((speedrun) => {\r\n        switch (speedrun.VideoPlatform) {\r\n          case \"哔哩哔哩\":\r\n            speedrun.VideoURL =\r\n              \"https://www.bilibili.com/video/\" + speedrun.VID;\r\n            speedrun.PlayerURL = \"https://space.bilibili.com/\" + speedrun.UID;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      });\r\n      this.speedruns=[...this.speedruns,...this.speedruns];\r\n    },\r\n    freshTable()\r\n    {\r\n        this.$nextTick(()=>{\r\n            this.$refs.table.doLayout();\r\n        })\r\n    }\r\n  },\r\n};\r\n</script>"],"mappings":"AAgCA;EACAA,KAAA;IACA;MACAC,SAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACAC,MAAA,CAAAC,gBAAA,gBAAAC,UAAA;EACA;EACA,MAAAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACA,MAAAD,aAAA;MACA,MAAAE,GAAA;MACA,MAAAC,OAAA,OAAAC,OAAA;QACA;QACA;QACA;MACA;MACA,MAAAC,OAAA;QACAC,MAAA;QACAH,OAAA,EAAAA;MACA;MACA,MAAAI,QAAA,SAAAC,KAAA,CAAAN,GAAA,EAAAG,OAAA;MACA;MACA,KAAAZ,SAAA,UAAAc,QAAA,CAAAE,IAAA,IAAAC,OAAA;MACA,KAAAjB,SAAA,CAAAkB,OAAA,CAAAC,QAAA;QACA,QAAAA,QAAA,CAAAC,aAAA;UACA;YACAD,QAAA,CAAAE,QAAA,GACA,oCAAAF,QAAA,CAAAG,GAAA;YACAH,QAAA,CAAAI,SAAA,mCAAAJ,QAAA,CAAAK,GAAA;YACA;UACA;YACA;QACA;MACA;MACA,KAAAxB,SAAA,YAAAA,SAAA,UAAAA,SAAA;IACA;IACAK,WAAA,EACA;MACA,KAAAoB,SAAA;QACA,KAAAC,KAAA,CAAAC,KAAA,CAAAC,QAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}